<%- include('partials/header.ejs') %>
<%- include('partials/navbar.ejs', {
    active: active
}) %>

    <div class="w-main inline-flex flex-col flex-4">
        <div class="flex sticky top-[10vh] bg-white">
            <div class="flex-1">
                <div class="m-4">
                    <nav class="flex" aria-label="Breadcrumb">                        
                        <ol class="inline-flex items-center space-x-1 md:space-x-3">
                        <li>
                            <div class="flex items-center">            
                            <a href="/gaia/" class="ml-1 text-sm font-medium text-gray-900 hover:text-gray-400 md:ml-2 ">Project</a>
                            </div>
                        </li>
                        <li aria-current="page">
                            <div class="flex items-center">
                            <svg aria-hidden="true" class="w-6 h-6 text-gray-800" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg>
                            <span class="ml-1 text-sm font-medium text-gray-900 md:ml-2">Tasks</span>
                            </div>
                        </li>
                        </ol>                               
                    </nav>
                </div>
            
                <div class="m-4">
                    <div class="inline-flex shadow-sm" role="group">
                        <button type="button" class="px-4 py-2 text-sm font-medium text-gray-900 bg-transparent border-b border-gray-600  hover:bg-indigo-900 hover:text-white focus:z-10 focus:ring-2 focus:ring-gray-500 focus:bg-gray-900 focus:text-white  ">
                        ALL
                        </button>
                        <button type="button" class="px-4 py-2 text-sm font-medium text-gray-900 bg-transparent border-b border-gray-600 hover:bg-indigo-900 hover:text-white focus:z-10 focus:ring-2 focus:ring-gray-500 focus:bg-gray-900 focus:text-white  ">
                        FRONTEND
                        </button>
                        <button type="button" class="px-4 py-2 text-sm font-medium text-gray-900 bg-transparent border-b border-gray-600  hover:bg-indigo-900 hover:text-white focus:z-10 focus:ring-2 focus:ring-gray-500 focus:bg-gray-900 focus:text-white  ">
                        BACKEND
                        </button>
                    </div>
                </div>        
            </div>

            <div class="m-4 flex-[3_3_0%] flex justify-center align-center">
            
                    <% if(epics){%>
                    <button id="dropdownHoverButton" data-dropdown-toggle="dropdownHover" data-dropdown-trigger="hover" 
                        class="h-1/2 w-4/5 text-white bg-indigo-900 rounded-l-lg hover:bg-indigo-700 hover:text-white focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2.5 text-center inline-flex items-center "
                        type="button"><%= epics[0].nombre %><svg class="w-4 h-4 ml-2" aria-hidden="true" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button>
                    <!-- Dropdown menu -->                
                    <div id="dropdownHover" class=" z-10 hidden bg-white divide-y divide-gray-100 rounded-lg shadow max-w-4/5 min-w-44">
                        <ul class="py-2 text-sm text-gray-700" aria-labelledby="dropdownHoverButton">
                            
                                <% for(let i=0;i<epics.length;i++){%>
                                        <li>
                                            <a href="<%= epics[i].idTicket %>" class="block px-4 py-2 rounded-lg hover:bg-indigo-900 hover:text-white"><%= epics[i].nombre %></a>
                                        </li>
                                <% }%>
                            <% }%>
                        </ul>
                    </div>
                    
            </div>
        </div>

        <div class="m-2 p-8 flex flex-row flex-wrap justify-around">
        
            <div href="#" class="block min-w-[20%] max-w-[40%] my-2 mx-1 p-6 bg-blue-200 rounded-lg shadow">
                <h5 class="mb-2 text-2xl font-bold tracking-tight text-gray-900">To do </h5>
    
                    <% if (tasks1.length > 0) { %>
                    
                        <div class="  ">
                            <table class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
                                <thead class="text-xs text-gray-900 uppercase dark:text-gray-400">
                                    <tr>
                                        <th scope="col" class="px-6 py-3">
                                            Name
                                        </th>
                                        <th scope="col" class="px-6 py-3">
                                            Point
                                        </th>
                                    </tr>
                                </thead>
                                <% for (let task1 of tasks1) { %>
                                    <tbody >
                                        <tr class="text-gray-900 dark:text-gray-800 w-14  text-ellipsis hover:bg-blue-400" onclick="viewDetail(<%= task1.idTicket%>)">
                                            <th scope="row" class="px-6 py-4 w-0.5 font-medium text-gray-900   dark:text-gray text-ellipsis    rounded-s-3xl">
                                                <a><%= task1.nombre %></a>
                                            </th>
                                            <td class="px-6 py-4 rounded-e-3xl">
                                                <%= task1.puntosAgiles %>
                                            </td>
                                        </tr>
                                    </tbody>
                                <% } %>
                            </table>
                        </div>
                    <% }  else { %>
                        <div class="text-center flex justify-center items-center">
                            <p class="text-5 mt-5 font-medium">
                                No tasks 
                            </p>
                        </div>
                    <% } %>
            </div>
        
            <div href="#" class="block min-w-[20%] max-w-[40%] my-2 mx-1 p-6 bg-yellow-200 rounded-lg shadow">
                <h5 class="mb-2 text-2xl font-bold tracking-tight text-gray-900">In progress </h5>
    
                <% if (tasks2.length > 0) { %>
                            
                    <div class="  ">
    
                        <table class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
    
                            <thead class="text-xs text-gray-900 uppercase dark:text-gray-400 ">
                                <tr>
                                    <th scope="col" class="px-6 py-3">
                                        Name
                                    </th>
                                    <th scope="col" class="px-6 py-3">
                                        Point
                                    </th>
                                </tr>
                            </thead>
    
                            <% for (let task2 of tasks2) { %>
                                <tbody>
                                    <tr class="text-gray-900 dark:text-gray-800 w-14  text-ellipsis    hover:bg-amber-400" onclick="viewDetail(<%= task2.idTicket%>)">
                                        <th scope="row" class="px-6 py-4 w-0.5 font-medium text-gray-900   dark:text-gray text-ellipsis    rounded-s-3xl">                                            
                                            <a><%= task2.nombre %></a>
                                        </th>
                                        <td class="px-6 py-4 rounded-e-3xl">
                                            <%= task2.puntosAgiles %>
                                        </td> 
                                    </tr>
                                </tbody>
                            <% } %>
                        </table>
                    </div>
                <% }  else { %>
                    <div class="text-center flex justify-center items-center">
                        <p class="text-5 mt-5 font-medium">
                            No tasks
                        </p>
                    </div>
                <% } %>
            </div>
    
            <div href="#" class="block min-w-[20%] max-w-[40%] my-2 mx-1 p-6 bg-green-200 rounded-lg shadow">
                    <h5 class="mb-2 text-2xl font-bold tracking-tight text-gray-900">Code review </h5>
    
                    <% if (tasks3.length > 0) { %>
                            
                        <div class="  ">
                            <table class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
                                <thead class="text-xs text-gray-900 uppercase dark:text-gray-400">
                                    <tr>
                                        <th scope="col" class="px-6 py-3">
                                            Name
                                        </th>
                                        <th scope="col" class="px-6 py-3">
                                            Point
                                        </th>
                                    </tr>
                                </thead>
                                <% for (let task3 of tasks3) { %>
                                    <tbody>
                                        <tr class="text-gray-900 dark:text-gray-800 w-14   text-ellipsis    hover:bg-green-400" onclick="viewDetail(<%= task3.idTicket%>)">
                                            <th scope="row" class="px-6 py-4 w-0.5 font-medium text-gray-900   dark:text-gray text-ellipsis    rounded-s-3xl">
                                                <a href="/gaia/taskInfo/<%= task3.idTicket%>"><%= task3.nombre %></a>
                                            </th>
                                            <td class="px-6 py-4 rounded-e-3xl">
                                                <%= task3.puntosAgiles %>
                                            </td> 
                                        </tr>
                                    </tbody>
                                <% } %>
                            </table>
                        </div>
                    <% }  else { %>
                        <div class="text-center flex justify-center items-center">
                            <p class="text-5 mt-5 font-medium">
                                No tasks
                            </p>
                        </div>
                    <% } %>
            </div>
                
            <div href="#" class="block min-w-[20%] max-w-[40%] my-2 mx-1 p-6 bg-red-200 rounded-lg shadow">
                <h5 class="mb-2 text-2xl font-bold tracking-tight text-gray-900">Quality review </h5>
    
                <% if (tasks4.length > 0) { %>
                            
                        <div class="  ">
                            <table class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
                                <thead class="text-xs text-gray-900 uppercase dark:text-gray-400">
                                    <tr>
                                        <th scope="col" class="px-6 py-3">
                                            Name
                                        </th>
                                        <th scope="col" class="px-6 py-3">
                                            Point
                                        </th>
                                    </tr>
                                </thead>
                                <% for (let task4 of tasks4) { %>
                                    <tbody>
                                        <tr class="text-gray-900 dark:text-gray-800 w-14   text-ellipsis    hover:bg-red-400" onclick="viewDetail(<%= task4.idTicket%>)">
                                            <th scope="row" class="px-6 py-4 w-0.5 font-medium text-gray-900   dark:text-gray text-ellipsis    rounded-s-3xl">
                                                <a href="/gaia/taskInfo/<%= task4.idTicket%>"><%= task4.nombre %></a>
                                            </th>
                                            <td class="px-6 py-4 rounded-e-3xl">
                                                <%= task4.puntosAgiles %>
                                            </td> 
                                        </tr>
                                    </tbody>
                                <% } %>
                            </table>
                        </div>
                    <% }  else { %>
                        <div class="text-center flex justify-center items-center">
                            <p class="text-5 mt-5 font-medium">
                                No tasks
                            </p>
                        </div>
                    <% } %>
            </div>
    
            <div href="#" class="block min-w-[20%] max-w-[40%] my-2 mx-1 p-6 bg-emerald-300 rounded-lg shadow">
                    <h5 class="mb-2 text-2xl font-bold tracking-tight text-gray-900">Release ready </h5>
    
                    <% if (tasks5.length > 0) { %>
                            
                        <div class="  ">
                            <table class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
                                <thead class="text-xs text-gray-900 uppercase dark:text-gray-400">
                                    <tr>
                                        <th scope="col" class="px-6 py-3">
                                            Name
                                        </th>
                                        <th scope="col" class="px-6 py-3">
                                            Point
                                        </th>
                                    </tr>
                                </thead>
                                <% for (let task5 of tasks5) { %>
                                    <tbody>
                                        <tr class="text-gray-900 dark:text-gray-800 w-14   text-ellipsis    hover:bg-green-500" onclick="viewDetail(<%= task5.idTicket%>)">
                                            <th scope="row" class="px-6 py-4 w-0.5 font-medium text-gray-900   dark:text-gray text-ellipsis    rounded-s-3xl">
                                                <a href="/gaia/taskInfo/<%= task5.idTicket%>"><%= task5.nombre %></a>
                                            </th>
                                            <td class="px-6 py-4 rounded-e-3xl">
                                                <%= task5.puntosAgiles %>
                                            </td> 
                                        </tr>
                                    </tbody>
                                <% } %>
                            </table>
                        </div>
                    <% }  else { %>
                        <div class="text-center flex justify-center items-center">
                            <p class="text-5 mt-5 font-medium">
                                No tasks
                            </p>
                        </div>
                    <% } %>
            </div>
    
            <div href="#" class="block min-w-[20%] max-w-[40%] my-2 mx-1 p-6 bg-violet-400 rounded-lg shadow">
                    <h5 class="mb-2 text-2xl font-bold tracking-tight text-gray-900">Done</h5>
    
                    <% if (tasks6.length > 0) { %>
                            
                        <div class="  ">
                            <table class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
                                <thead class="text-xs text-gray-900 uppercase dark:text-gray-400">
                                    <tr>
                                        <th scope="col" class="px-6 py-3">
                                            Name
                                        </th>
                                        <th scope="col" class="px-6 py-3">
                                            Point
                                        </th>
                                    </tr>
                                </thead>
                                <% for (let task6 of tasks6) { %>
                                    <tbody>
                                        <tr class="text-gray-900 dark:text-gray-800 w-14   text-ellipsis    hover:bg-purple-700" onclick="viewDetail(<%= task6.idTicket%>)">
                                            <th scope="row" class="px-6 py-4 w-0.5 font-medium text-gray-900   dark:text-gray text-ellipsis    rounded-s-3xl">
                                                <a href="/gaia/taskInfo/<%= task6.idTicket%>"><%= task6.nombre %></a>
                                            </th>
                                            <td class="px-6 py-4 rounded-e-3xl">
                                                <%= task6.puntosAgiles %>
                                            </td> 
                                        </tr>
                                    </tbody>
                                <% } %>
                            </table>
                        </div>
                    <% }  else { %>
                        <div class="text-center flex justify-center items-center">
                            <p class="text-5 mt-5 font-medium">
                                No tasks
                            </p>
                        </div>
                    <% } %>
            </div>
    
            <div href="#" class="block min-w-[20%] max-w-[40%] my-2 mx-1 p-6 bg-indigo-200 rounded-lg shadow">
                <h5 class="mb-2 text-2xl font-bold tracking-tight text-gray-900">Closed </h5>
    
                    <% if (tasks7.length > 0) { %>
                            
                        <div class="  ">
                            <table class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
                                <thead class="text-xs text-gray-900 uppercase dark:text-gray-400">
                                    <tr>
                                        <th scope="col" class="px-6 py-3">
                                            Name
                                        </th>
                                        <th scope="col" class="px-6 py-3">
                                            Point
                                        </th>
                                    </tr>
                                </thead>
                                <% for (let task7 of tasks7) { %>
                                    <tbody> 
                                        <tr class="text-gray-900 dark:text-gray-800 w-14   text-ellipsis    hover:bg-blue-300" onclick="viewDetail(<%= task7.idTicket%>)">
                                            <th scope="row" class="px-6 py-4 w-0.5 font-medium text-gray-900   dark:text-gray text-ellipsis    rounded-s-3xl">
                                                <a href="/gaia/taskInfo/<%= task7.idTicket%>"><%= task7.nombre %></a>
                                            </th>
                                            <td class="px-6 py-4 rounded-e-3xl">
                                                <%= task7.puntosAgiles %>
                                            </td> 
                                        </tr>
                                    </tbody>
                                <% } %>
                            </table>
                        </div>
                    <% }  else { %>
                        <div class="text-center flex justify-center items-center">
                            <p class="text-5 mt-5 font-medium">
                                No tasks
                            </p>
                        </div>
                    <% } %>
            </div>
        </div>
    </div>


    
</div>


<script>    
    function viewDetail(idTarea){               
        fetch('/gaia/taskInfo/'+idTarea, {
            method: 'GET',
            headers: {
            'Content-Type': 'application/json',
            }
        }).then(result => {
            return result.json();
        }).then(data => {
            if(data){
                console.log(data);
                //document.getElementById("resultados").innerHTML = respuesta;
            }            
        }).catch(err => {
            console.log(err);
        });
    }
</script>


<%- include('partials/endHTML.ejs') %>