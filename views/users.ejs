<%- include('partials/header.ejs') %>
<%- include('partials/navbar.ejs', {
    active: 'users'
}) %>

<div class="w-main inline-block content center flex justify-center items-center py-8">

    <!-- lista de usuarios-->

    <div class="justify-center w-3/5 " id="accordion-collapse" data-accordion="collapse">
    <% if (usuarios_proyectos) { %>
        <% let num = 1; %>
        <% for(let user in usuarios_proyectos) { %>
            
            <h2 id="accordion-collapse-heading-<%= num%>" class="w-full text-sm text-left text-gray-200 hover:bg-gray-100">
                <button type="button" class="flex items-center justify-between w-full p-5 font-medium text-left text-white rounded-xs focus:ring-2 focus:ring-gray-200 focus:bg-gray-300" data-accordion-target="#accordion-collapse-body-<%= num%>" aria-expanded="true" aria-controls="accordion-collapse-body-<%= num %>">
                <span class="text-black"><%= user  %> </span>
                <svg data-accordion-icon class="w-6 h-6 rotate-180 shrink-0" fill="black" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
                </button>
            </h2>
            <div id="accordion-collapse-body-<%= num %>" class="hidden" aria-labelledby="accordion-collapse-heading-<%= num%>">
                <div class="p-5 border bg-indigo-400 rounded-b-xl">
                
                    <div class="flex justify-around">
                        <div><p class="font-semibold text-gray-900 underline dark:text-white decoration-indigo-500">Projects</p>

                            <!-- Proyectos del usuario en cuestion -->

                                <div>
                                    <% if (usuarios_proyectos[user]) { %>
                                        <% for(let proyecto of usuarios_proyectos[user]) { %> 
                                            <%= proyecto.nombre %> <br>
                                        <% } %>
                                    <% } %>
                                </div>

                        </div>
                        <div><p class="font-semibold text-gray-900 underline dark:text-white decoration-indigo-500">Work area</p>
                            <nav class=" pt-8 bg-grey-light w-full rounded-md">
                                <ol class="list-reset flex">
                                    <li>

                                        <% let contador_front = 0; %>
                                        <% let contador_back = 0; %>
                                        <% for(let num2 of usuarios_front_back[user]) { %>
                                        
                                            <% if (num2.front_back == 0) { %>
                                                <% contador_front += 1; %>
                                            <% } else { %>
                                                <% contador_back += 1; %>
                                            <% } %>
                                        <% } %>


                                        <% if ((contador_front > 0) && (contador_back > 0)) { %>
                                            <a href="#" class="text-primary transition duration-150 ease-in-out hover:text-primary-600 focus:text-primary-600 active:text-primary-700 dark:text-primary-400 dark:hover:text-primary-500 dark:focus:text-primary-500 dark:active:text-primary-600">Frontend | Backend</a>
                                        <% } else if((contador_front > 0) && (contador_back == 0)){ %>
                                            <a href="#" class="text-primary transition duration-150 ease-in-out hover:text-primary-600 focus:text-primary-600 active:text-primary-700 dark:text-primary-400 dark:hover:text-primary-500 dark:focus:text-primary-500 dark:active:text-primary-600">Frontend</a>
                                        <% } else if((contador_back > 0) && (contador_front == 0)){ %>
                                            <a href="#" class="text-primary transition duration-150 ease-in-out hover:text-primary-600 focus:text-primary-600 active:text-primary-700 dark:text-primary-400 dark:hover:text-primary-500 dark:focus:text-primary-500 dark:active:text-primary-600">Backend</a>
                                        <% } %>
                                        
                                    </li>
                                </ol>
                            </nav><br>
                        </div>
                    </div>
                </div>
            </div>
            <% num++ %>
        <% } %>
    <% } else { %>
        No users in the datbase...
    <% } %>
    </div>

</div>

<%- include('partials/endHTML.ejs') %>